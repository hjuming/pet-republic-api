# ========= 基本 =========
name = "pet-republic-api"
main = "src/index.js"
compatibility_date = "2024-10-01"
workers_dev = true

# 明寫帳號 ID（與 whoami 顯示一致）
account_id = "你的 Cloudflare Account ID"

# ========= Vars =========
[vars]
MAX_IMAGE_MB = "20"

# ========= R2（預設環境）=========
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "my-images-bucket"

# ========= D1（預設環境）=========
[[d1_databases]]
binding = "DATABASE"          # ← 這個是給 Worker/CI 使用的「binding 名」
database_name = "image-db"    # ← 你的 D1 實際名稱
migrations_dir = "migrations" # ← CI 會依此位置套用

# ========= Cron（選填）=========
[triggers]
crons = ["*/30 * * * *"]

# ========= production 環境 =========
[env.production]
account_id = "你的 Cloudflare Account ID"

[env.production.vars]
MAX_IMAGE_MB = "20"

[[env.production.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "my-images-bucket"

[[env.production.d1_databases]]
binding = "DATABASE"
database_name = "image-db"
migrations_dir = "migrations"
